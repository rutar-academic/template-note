% styling
% -------

% fonts
\RequirePackage{palatino}

% captions
\RequirePackage[
  labelfont={sc},
  singlelinecheck=true, % centered single-lined captions
  format=plain,
  margin=1cm,
  labelsep={period},
]{caption}

% section headers
\RequirePackage{titlesec}
\newcommand{\addperiod}[1]{#1.}

\titleformat{\section}[block]%
  {\large\scshape\filcenter}% format
  {\thesection.}% label
  {1em}% sep
  {}% before-code

\titleformat{\subsection}[runin]%
  {\bfseries\filright}% format
  {\thesubsection.}% label
  {.5em}% sep
  {\addperiod}% before-code

\titleformat{\subsubsection}[runin]%
  {\itshape\filright}% format
  {\thesubsubsection.}% label
  {.5em}% sep
  {\addperiod}% before-code

\newcommand*\@duedate{}
\newcommand*\duedate[2][]{%
   \def\@duedate{#2}%
}

\newcommand*\@shorttitle{}

% customize title printing
\renewcommand\title[2][]{\renewcommand\@title{#2}\ifstrempty{#1}{\renewcommand\@shorttitle{#2}}{\renewcommand\@shorttitle{#1}}}
\def\@maketitle{%
  \newpage
  \null
  \vskip 2em%
  \begin{center}%
    {\LARGE \@title \par}%
    \vskip 1.5em%
    {\large\scshape
      \lineskip .5em%
      \@duedate}%
  \end{center}%
  \par
  \vskip 1.5em}

% print title, bibliography, and addresslist
\AtBeginDocument{\maketitle}
\AtEndDocument{\phantomsection\printbibliography[heading=bibintoc]}
